#summary System Feature - Purchase System - Functionality

[TechDoc_Architecture_System_Purchase Back]

= Functionality =
Below are the methods to be defined in the IPurchaseSystem interface.

=== Reset ===
Purpose:
Resets the system by cleaning out any purchase entries held by any teams.

Arguments:
void

Returns:
void

=== !LoadConfigForTeam ===
Purpose:
Loads in the Purchase Sections and Items for the specified team from the passed-in XML section.

Arguments:
 * nTeam - Team ID that owns these purchase items
 * pXMLNode - XML Node that represents the root <Purchases> where sections and items are defined in.

Returns: 
TRUE if the config was loaded correctly, FALSE otherwise.

=== !DefineManualItem ===
Purpose:
Adds a manual Purchase Item to the given Section for the given team.
 * nTeam - Team ID that owns the Purchase Section.
 * szSection - Name of the Purchase Section that should house the Item.
 * tItem - Purchase Item to add. (See tPurchaseItem sub module)

= Sub Modules =

=== !tPurchaseSection ===
Description: Structure used to describe a Purchase Section.

Member Variables:
 * m_nTeam - Team ID that owns it
 * m_szName - Section name
 * m_pItemRoot - Root of Purchase Item list.

=== !tPurchaseItem ===
Description: Structure used to describe a Purchase Item.

Member Variables:
 * m_pNext - Next Purchase Item in the list.
 * m_szName - Name of the Purchase Item.
 * m_szDesc - Description of the Purchase Item.
 * m_nCost - Cost of the item.
 * m_ucFlags - Purchase Item flags. (See PURCHASE_FLAG)
 * m_Item = Item purchased (based on type)
 * m_szImageEnabled - 2D texture used when enabled
 * m_szImageDisabled - 2D texture used when disabled
 * m_Prerequisite - Map of prerequisites (See tPrerequisite)

Flags: PURCHASE_FLAG section:
 * PURCHASE_FLAG_ENABLED - Bit used to mark if purchase item is enabled
 * PURCHASE_FLAG_HIDDEN - Bit used to mark if purchase item is hidden.
 * PURCHASE_FLAG_TYPE_SOLDIER - Bit combination used to mark if purchase item is of type Soldier.
 * PURCHASE_FLAG_TYPE_VEHICLE - Bit combination used to mark if purchase item is of type Vehicle.
 * PURCHASE_FLAG_TYPE_WEAPON - Bit combination used to mark if purchase item is of type Weapon.
 * PURCHASE_FLAG_TYPE_REFILL - Bit combination used to mark if purchase item is of type Refill.

=== tPrerequisite ===
Description: Structure used to describe a prerequisite for a Purchase Item.

Member Variables:
 * m_szClass - Building class name
 * m_bDisableOnDeath - TRUE if the item should be disabled on building death.
 * m_bDisableOnPowerDown - TRUE if the item should be disabled on power down.
 * m_nCostDeduction - Amount of money taken off Item cost if building is functioning.

[TechDoc_Architecture_System_Purchase Back]